{"ast":null,"code":"import withApollo from 'next-with-apollo';\nimport ApolloClient, { InMemoryCache } from 'apollo-boost';\nlet graph_url;\n\nif (true) {\n  graph_url = 'http://localhost:5000/';\n} else {\n  graph_url = 'http://backend:5000/';\n}\n\nfunction client({\n  headers,\n  initialState\n}) {\n  return new ApolloClient({\n    request: operation => {\n      operation.setContext({\n        fetchOptions: {\n          credentials: 'include'\n        },\n        headers\n      });\n    },\n    uri: graph_url,\n    cache: new InMemoryCache().restore(initialState || {})\n  });\n}\n\nexport default withApollo(client);","map":{"version":3,"sources":["/frontend/lib/withApollo.js"],"names":["withApollo","ApolloClient","InMemoryCache","graph_url","client","headers","initialState","request","operation","setContext","fetchOptions","credentials","uri","cache","restore"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,kBAAvB;AACA,OAAOC,YAAP,IAAuBC,aAAvB,QAA4C,cAA5C;AAEA,IAAIC,SAAJ;;AAEA,UAAiC;AAC/BA,EAAAA,SAAS,GAAG,wBAAZ;AACD,CAFD,MAEO;AACLA,EAAAA,SAAS,GAAG,sBAAZ;AACD;;AAED,SAASC,MAAT,CAAgB;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAhB,EAA2C;AACzC,SAAO,IAAIL,YAAJ,CAAiB;AACtBM,IAAAA,OAAO,EAAEC,SAAS,IAAI;AACpBA,MAAAA,SAAS,CAACC,UAAV,CAAqB;AACnBC,QAAAA,YAAY,EAAE;AACZC,UAAAA,WAAW,EAAE;AADD,SADK;AAInBN,QAAAA;AAJmB,OAArB;AAMD,KARqB;AAStBO,IAAAA,GAAG,EAAET,SATiB;AAUtBU,IAAAA,KAAK,EAAE,IAAIX,aAAJ,GAAoBY,OAApB,CAA4BR,YAAY,IAAI,EAA5C;AAVe,GAAjB,CAAP;AAYD;;AACD,eAAeN,UAAU,CAACI,MAAD,CAAzB","sourcesContent":["import withApollo from 'next-with-apollo';\nimport ApolloClient, { InMemoryCache } from 'apollo-boost';\n\nlet graph_url;\n\nif (typeof window !== undefined) {\n  graph_url = 'http://localhost:5000/';\n} else {\n  graph_url = 'http://backend:5000/';\n}\n\nfunction client({ headers, initialState }) {\n  return new ApolloClient({\n    request: operation => {\n      operation.setContext({\n        fetchOptions: {\n          credentials: 'include'\n        },\n        headers\n      });\n    },\n    uri: graph_url,\n    cache: new InMemoryCache().restore(initialState || {})\n  });\n}\nexport default withApollo(client);\n"]},"metadata":{},"sourceType":"module"}